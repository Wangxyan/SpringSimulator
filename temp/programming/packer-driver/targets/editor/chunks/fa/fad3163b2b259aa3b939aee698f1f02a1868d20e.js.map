{"version":3,"sources":["file:///D:/CODE/cocos_workspace/%E8%83%8C%E5%8C%85%E8%8B%B1%E9%9B%84/assets/Scripts/Game/Skill/SkillBulletItem.ts"],"names":["_decorator","director","Collider2D","Contact2DType","SkillBulletBase","GameDefine","MonsterBase","ccclass","property","SkillBulletItem","init","skillBulletObj","targetPos","angle","initStatus","initSkillBullet","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","selfCollider","otherCollider","contact","node","onAttacked","skillCfg","Damage","clear","childUpdate","dt","gameStart","frames","getTotalFrames","updateSkillBulletScreen","setBulletMove"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAuBC,MAAAA,Q,OAAAA,Q;AAAsBC,MAAAA,U,OAAAA,U;AAA+BC,MAAAA,a,OAAAA,a;;AAC5EC,MAAAA,e,iBAAAA,e;;AAEAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;iCAGjBS,e,WADZF,OAAO,CAAC,iBAAD,C,gBAAR,MACaE,eADb;AAAA;AAAA,8CACqD;AACjDC,QAAAA,IAAI,CAACC,cAAD,EAAiCC,SAAjC,EAAkDC,KAAlD,EAAiE;AACjE,eAAKC,UAAL,GAAkB,KAAlB;AACA,eAAKH,cAAL,GAAsBA,cAAtB;AACA,eAAKI,eAAL,CAAqBH,SAArB,EAAgCC,KAAhC;AACH;;AAEDG,QAAAA,KAAK,GAAG;AACJ;AACA,cAAIC,QAAQ,GAAG,KAAKC,YAAL,CAAkBhB,UAAlB,CAAf;;AACA,cAAIe,QAAJ,EAAc;AACVA,YAAAA,QAAQ,CAACE,EAAT,CAAYhB,aAAa,CAACiB,aAA1B,EAAyC,KAAKC,cAA9C,EAA8D,IAA9D;AACH;AACJ;;AACDA,QAAAA,cAAc,CAACC,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAyF;AACnG;AACAD,UAAAA,aAAa,CAACE,IAAd,CAAmBP,YAAnB;AAAA;AAAA,0CAA6CQ,UAA7C,CAAwD,KAAKf,cAAL,CAAoBgB,QAApB,CAA6BC,MAArF;AACA,eAAKC,KAAL;AACH;;AAGDC,QAAAA,WAAW,CAACC,EAAD,EAAmB;AAC1B,cAAI;AAAA;AAAA,wCAAWC,SAAX,IAAwB,KAAKlB,UAAjC,EAA6C;AACzC,gBAAImB,MAAM,GAAGhC,QAAQ,CAACiC,cAAT,EAAb;AACA,iBAAKC,uBAAL,CAA6BJ,EAA7B;AACA,iBAAKK,aAAL,CAAmBL,EAAnB;AACH;AACJ;;AA3BgD,O","sourcesContent":["import { _decorator, Component, director, Node, Vec3, Collider2D, IPhysics2DContact, Contact2DType } from 'cc';\r\nimport { SkillBulletBase } from './SkillBulletBase';\r\nimport { SkillBulletObj } from '../Data/SkillData';\r\nimport { GameDefine } from '../../GameDefine';\r\nimport { MonsterBase } from '../Monster/MonsterBase';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SkillBulletItem')\r\nexport class SkillBulletItem extends SkillBulletBase {\r\n    init(skillBulletObj: SkillBulletObj, targetPos: Vec3, angle: number) {\r\n        this.initStatus = false;\r\n        this.skillBulletObj = skillBulletObj;\r\n        this.initSkillBullet(targetPos, angle);\r\n    }\r\n\r\n    start() {\r\n        // 注册单个碰撞体的回调函数\r\n        let collider = this.getComponent(Collider2D);\r\n        if (collider) {\r\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\r\n        }\r\n    }\r\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\r\n        // 只在两个碰撞体开始接触时被调用一次\r\n        otherCollider.node.getComponent(MonsterBase).onAttacked(this.skillBulletObj.skillCfg.Damage);\r\n        this.clear();\r\n    }\r\n\r\n\r\n    childUpdate(dt: number): void {\r\n        if (GameDefine.gameStart && this.initStatus) {\r\n            let frames = director.getTotalFrames();\r\n            this.updateSkillBulletScreen(dt);\r\n            this.setBulletMove(dt);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n"]}