{"version":3,"sources":["file:///D:/CODE/cocos_workspace/%E8%83%8C%E5%8C%85%E8%8B%B1%E9%9B%84/assets/Scripts/Frame/OpenPopupManager.ts"],"names":["OpenPopupManager","instantiate","Constants","Toast","GameController","PopupManager","PopupOptions","ResourcesUtil","TopLayer","MidLayer","BottomLayer","ToastLayer","showSeqPopup","path","parentPath","param","callBack","options","parent","instance","pushToPopupSeq","hideSeqPopup","shiftFromPopupSeq","addHidePopup","showChapterPopup","PopupUI","ChapterPopup","show","showGamePopup","GamePopup","closeCur","showGameOverPopup","status","GameOverPopup","showWeaponDetailPopup","weaponCfg","WeaponDetailPopup","showPausePopup","PausePopup","pause","showToast","msg","posY","toastPath","getPrefab","then","item","toast","setPosition","getComponent","init","_instance"],"mappings":"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","sourcesContent":["import { instantiate, Node, Prefab, Vec3 } from \"cc\";\r\nimport { Constants } from \"../Constants\";\r\nimport { SelectObj } from \"../Game/Data/SkillUpgradeData\";\r\nimport { WeaponCfg } from \"../Model/WeaponModel\";\r\nimport { Toast } from \"../Popup/Common/Toast\";\r\nimport GameController from \"./GameController\";\r\nimport { PopupManager, PopupOptions } from \"./PopupManager\";\r\nimport { ResourcesUtil } from \"./ResourcesUtil\";\r\n\r\nexport class OpenPopupManager {\r\n    public TopLayer: Node = null; //弹窗上层\r\n    public MidLayer: Node = null;//弹窗中层\r\n    public BottomLayer: Node = null;//弹窗下层\r\n    public ToastLayer: Node = null;//弹窗提示层\r\n\r\n\r\n    /* 显示队列弹窗 */\r\n    showSeqPopup(path: string, parentPath: string, param?: any, callBack?: Function) {\r\n        let options = new PopupOptions();\r\n        options.path = path;\r\n        options.parent = this.TopLayer;\r\n        PopupManager.instance.pushToPopupSeq(options, param, callBack);\r\n    }\r\n\r\n    /* 关闭队列弹窗 */\r\n    hideSeqPopup(path: string, callBack?: Function) {\r\n        PopupManager.instance.shiftFromPopupSeq(path, callBack);\r\n    }\r\n\r\n    /* 添加需要被动关闭的窗口 */\r\n    addHidePopup(path: string) {\r\n        PopupManager.instance.addHidePopup(path);\r\n    }\r\n\r\n    /* 显示章节界面 */\r\n    showChapterPopup(parent: Node) {\r\n        let options = new PopupOptions();\r\n        options.path = Constants.PopupUI.ChapterPopup;\r\n        options.parent = parent;\r\n        PopupManager.instance.show(options)\r\n    }\r\n\r\n    /* 显示战斗弹窗 */\r\n    showGamePopup() {\r\n        let options = new PopupOptions();\r\n        options.path = Constants.PopupUI.GamePopup;\r\n        options.parent = this.BottomLayer;\r\n        options.closeCur = true;\r\n        PopupManager.instance.show(options);\r\n    }\r\n\r\n    /* 显示战斗结束弹窗 */\r\n    showGameOverPopup(status: number) {\r\n        let options = new PopupOptions();\r\n        options.path = Constants.PopupUI.GameOverPopup;\r\n        options.parent = this.TopLayer;\r\n        PopupManager.instance.show(options, [status]);\r\n    }\r\n\r\n    /* 显示武器详情 */\r\n    showWeaponDetailPopup(weaponCfg: WeaponCfg) {\r\n        let options = new PopupOptions();\r\n        options.path = Constants.PopupUI.WeaponDetailPopup;\r\n        options.parent = this.MidLayer;\r\n        PopupManager.instance.show(options, [weaponCfg]);\r\n    }\r\n\r\n    /* 显示暂停界面 */\r\n    showPausePopup() {\r\n        let options = new PopupOptions();\r\n        options.path = Constants.PopupUI.PausePopup;\r\n        options.parent = this.MidLayer;\r\n        GameController.pause();\r\n        PopupManager.instance.show(options);\r\n    }\r\n\r\n    showToast(msg: string, posY: number = 0) {\r\n        let path = Constants.toastPath;\r\n        ResourcesUtil.getPrefab(path).then((item: Prefab) => {\r\n            let toast = instantiate(item);\r\n            toast.parent = this.ToastLayer;\r\n            toast.setPosition(0, posY);\r\n            toast.getComponent(Toast).init(msg);\r\n        })\r\n    }\r\n\r\n    public static _instance: OpenPopupManager = null;\r\n    public static get instance(): OpenPopupManager {\r\n        if (!this._instance) {\r\n            this._instance = new OpenPopupManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n}\r\n\r\n\r\n"]}