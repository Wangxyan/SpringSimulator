{"version":3,"sources":["file:///D:/CODE/cocos_workspace/%E8%83%8C%E5%8C%85%E8%8B%B1%E9%9B%84/assets/Scripts/Popup/Skill/SkillSelectPopup.ts"],"names":["_decorator","Component","Node","tween","v3","Constants","GameController","PopupManager","SkillUpgradeData","SkillSelectItem","ccclass","property","SkillSelectPopup","show","list","setSkillSelectInfo","items","content","children","block","active","j","length","element","i","selectItem","getComponent","init","onCloseBtn","bind","Promise","res","setScale","to","scale","call","start","resume","instance","hide","PopupUI","onChangeBtn","getSelectSkillListByWeight"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,E,OAAAA,E;;AACpCC,MAAAA,S,iBAAAA,S;;AACFC,MAAAA,c;;AACEC,MAAAA,Y,iBAAAA,Y;;AACWC,MAAAA,gB,iBAAAA,gB;;AACXC,MAAAA,e,iBAAAA,e;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;kCAGjBY,gB,WADZF,OAAO,CAAC,kBAAD,C,UAEHC,QAAQ,CAACT,IAAD,C,UAERS,QAAQ,CAACT,IAAD,C,2BAJb,MACaU,gBADb,SACsCX,SADtC,CACgD;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAK5CY,QAAAA,IAAI,CAACC,IAAD,EAAyB;AACzB,eAAKC,kBAAL,CAAwBD,IAAxB;AACH;;AAEuB,cAAlBC,kBAAkB,CAACD,IAAD,EAAyB;AAC7C,cAAIE,KAAK,GAAG,KAAKC,OAAL,CAAaC,QAAzB;AACA,eAAKC,KAAL,CAAWC,MAAX,GAAoB,IAApB;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,KAAK,CAACM,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnC,kBAAME,OAAO,GAAGP,KAAK,CAACK,CAAD,CAArB;AACAE,YAAAA,OAAO,CAACH,MAAR,GAAiB,KAAjB;AACH;;AACD,eAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,IAAI,CAACQ,MAAzB,EAAiCE,CAAC,EAAlC,EAAsC;AAClC,kBAAMD,OAAO,GAAGT,IAAI,CAACU,CAAD,CAApB;AACA,gBAAIC,UAAU,GAAGT,KAAK,CAACQ,CAAD,CAAtB;AACAC,YAAAA,UAAU,CAACC,YAAX;AAAA;AAAA,oDAAyCC,IAAzC,CAA8CJ,OAA9C,EAAuD,KAAKK,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAvD;AACA,kBAAM,IAAIC,OAAJ,CAAaC,GAAD,IAAS;AACvBN,cAAAA,UAAU,CAACO,QAAX,CAAoB,GAApB,EAAyB,GAAzB;AACAP,cAAAA,UAAU,CAACL,MAAX,GAAoB,IAApB;AACAjB,cAAAA,KAAK,CAACsB,UAAD,CAAL,CAAkBQ,EAAlB,CAAqB,IAArB,EAA2B;AAAEC,gBAAAA,KAAK,EAAE9B,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX;AAAX,eAA3B,EAAyD6B,EAAzD,CAA4D,IAA5D,EAAkE;AAAEC,gBAAAA,KAAK,EAAE9B,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP;AAAX,eAAlE,EAA0F+B,IAA1F,CAA+F,MAAM;AACjG,oBAAIX,CAAC,IAAI,CAAT,EAAY;AACR,uBAAKL,KAAL,CAAWC,MAAX,GAAoB,KAApB;AACH;;AACDW,gBAAAA,GAAG,CAAC,CAAD,CAAH;AACH,eALD,EAKGK,KALH;AAMH,aATK,CAAN;AAWH;AACJ;;AAEDR,QAAAA,UAAU,GAAG;AACT;AAAA;AAAA,gDAAeS,MAAf;AACA;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,IAAtB,CAA2B;AAAA;AAAA,sCAAUC,OAAV,CAAkB5B,gBAA7C;AACH;;AAED6B,QAAAA,WAAW,GAAG;AACV,cAAI3B,IAAI,GAAG;AAAA;AAAA,oDAAiBwB,QAAjB,CAA0BI,0BAA1B,EAAX;AACA,eAAK3B,kBAAL,CAAwBD,IAAxB;AACH;;AA1C2C,O;;;;;iBAE5B,I;;;;;;;iBAEF,I","sourcesContent":["import { _decorator, Component, Node, tween, v3 } from 'cc';\r\nimport { Constants } from '../../Constants';\r\nimport GameController from '../../Frame/GameController';\r\nimport { PopupManager } from '../../Frame/PopupManager';\r\nimport { SelectObj, SkillUpgradeData } from '../../Game/Data/SkillUpgradeData';\r\nimport { SkillSelectItem } from './Sub/SkillSelectItem';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('SkillSelectPopup')\r\nexport class SkillSelectPopup extends Component {\r\n    @property(Node)\r\n    content: Node = null;\r\n    @property(Node)\r\n    block: Node = null;\r\n    show(list: Array<SelectObj>) {\r\n        this.setSkillSelectInfo(list);\r\n    }\r\n\r\n    async setSkillSelectInfo(list: Array<SelectObj>) {\r\n        let items = this.content.children;\r\n        this.block.active = true;\r\n        for (let j = 0; j < items.length; j++) {\r\n            const element = items[j];\r\n            element.active = false;\r\n        }\r\n        for (let i = 0; i < list.length; i++) {\r\n            const element = list[i];\r\n            let selectItem = items[i];\r\n            selectItem.getComponent(SkillSelectItem).init(element, this.onCloseBtn.bind(this));\r\n            await new Promise((res) => {\r\n                selectItem.setScale(0.5, 0.5);\r\n                selectItem.active = true;\r\n                tween(selectItem).to(0.05, { scale: v3(1.1, 1.1, 1.1) }).to(0.05, { scale: v3(1, 1, 1) }).call(() => {\r\n                    if (i == 2) {\r\n                        this.block.active = false;\r\n                    }\r\n                    res(0);\r\n                }).start();\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    onCloseBtn() {\r\n        GameController.resume()\r\n        PopupManager.instance.hide(Constants.PopupUI.SkillSelectPopup);\r\n    }\r\n\r\n    onChangeBtn() {\r\n        let list = SkillUpgradeData.instance.getSelectSkillListByWeight();\r\n        this.setSkillSelectInfo(list);\r\n    }\r\n}\r\n\r\n\r\n"]}