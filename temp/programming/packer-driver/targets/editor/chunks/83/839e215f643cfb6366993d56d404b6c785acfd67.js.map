{"version":3,"sources":["file:///D:/CODE/cocos_workspace/%E8%83%8C%E5%8C%85%E8%8B%B1%E9%9B%84/assets/Scripts/Frame/CfgMgr.ts"],"names":["CfgMgr","Debug","addCfgData","name","cfgs","CfgDataList","has","info","datas","CfgData","get","dataList","forEach","item","hasOwnProperty","key","Id","push","setCfgData","set","getCfgData","cls","ClassName","hasCfg","getCfgDataArray","getDataById","res","data","clearByKey","delete","Map"],"mappings":"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","sourcesContent":["import { Debug } from \"./Debug\";\r\n\r\nexport class CfgMgr {\r\n    public static CfgData: Map<string, any> = new Map();  //any为{key:{}}\r\n    public static CfgDataList: Map<string, any> = new Map();//any为[];\r\n\r\n\r\n    /**\r\n     * 添加配置数据\r\n     * @param name \r\n     * @param cfgs \r\n     */\r\n    public static addCfgData(name: string, cfgs: any) {\r\n        if (name == null || !this.CfgDataList.has(name)) {\r\n            Debug.info(\"Error: 不存在配置表\" + name);\r\n            return;\r\n        }\r\n        let datas = this.CfgData.get(name);\r\n        let dataList = this.CfgDataList.get(name);\r\n        cfgs.forEach((item) => {\r\n            if (item.hasOwnProperty('Id')) {\r\n                let key = item.Id;\r\n                datas[key] = item;\r\n                dataList.push(item);\r\n            }\r\n            else {\r\n                Debug.info('配置表Id字段错误:', name);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * 设置配置数据\r\n     * @param name \r\n     * @param cfgs \r\n     */\r\n    public static setCfgData(name: string, cfgs: any) {\r\n        let datas = {};\r\n        let dataList = [];\r\n        cfgs.forEach((item) => {\r\n            if (item.hasOwnProperty('Id')) {\r\n                let key = item.Id;\r\n                datas[key] = item;\r\n                dataList.push(item);\r\n            }\r\n            else {\r\n                Debug.info('配置表Id字段错误:', name);\r\n            }\r\n        });\r\n        this.CfgData.set(name, datas);\r\n        this.CfgDataList.set(name, dataList);\r\n    }\r\n\r\n    /**\r\n    * 返回数据对象map\r\n    * cfgMgr.getCfgData<class>(class);\r\n    * @param  {any} cfgCls  数据对象\r\n    * @returns T            数据对象\r\n    */\r\n    public static getCfgData<T>(cls: any): { [key: string]: T } {\r\n        let name = cls.ClassName;\r\n        if (!this.CfgData.has(name)) {\r\n            Debug.info(\"Error: 不存在配置表\" + name);\r\n            return null;\r\n        }\r\n\r\n        return this.CfgData.get(name);\r\n    };\r\n\r\n    public static hasCfg(key: string) {\r\n        if (this.CfgData.has(key)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /**\r\n    * 返回数据对象数组\r\n    * cfgMgr.getCfgDataArray<class>(class);\r\n    * @param  {any} cfgCls 数据对象\r\n    * @returns Array       数据对象数组\r\n    */\r\n    public static getCfgDataArray<T>(cls: any): Array<T> {\r\n        let name = cls.ClassName;\r\n        if (name == null || !this.CfgDataList.has(name)) {\r\n            Debug.info(\"Error: 不存在配置表\" + name);\r\n            return null;\r\n        }\r\n\r\n        return this.CfgDataList.get(name);\r\n    };\r\n\r\n    /**\r\n * 根据ID获得配置\r\n * @param  {any} cfgCls\r\n * @param  {string|number} Id\r\n * @returns T\r\n */\r\n    public static getDataById<T>(cls: any, Id: string | number): T {\r\n        let name = cls.ClassName;\r\n        let res: T = null;\r\n        if (!this.CfgData.has(name)) {\r\n            Debug.info(name + \"配置不存在。\" + Id);\r\n        }\r\n        else {\r\n            let data = this.CfgData.get(name);\r\n            if (!data[Id]) {\r\n                Debug.info(name + \":不存在ID \" + Id);\r\n            }\r\n            else {\r\n                res = data[Id];\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    public static clearByKey(key: string) {\r\n        this.CfgData.delete(key);\r\n        this.CfgDataList.delete(key);\r\n    }\r\n}\r\n"]}