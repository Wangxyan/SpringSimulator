{"version":3,"sources":["file:///D:/CODE/cocos_workspace/%E8%83%8C%E5%8C%85%E8%8B%B1%E9%9B%84/assets/Scripts/Frame/animationUI.ts"],"names":["_decorator","BlockInputEvents","Component","Node","tween","UIOpacity","UITransform","v3","ccclass","property","animationUI","_during","_blocker","onLoad","blocker","node","getChildByName","addComponent","parent","getComponent","setContentSize","contentSize","close","com","active","bg","content","to","opacity","easing","start","scale","call","open","setScale"],"mappings":"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","sourcesContent":["import { _decorator, BlockInputEvents, Component, log, Node, tween, UI, UIOpacity, UITransform, v3 } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('animationUI')\r\nexport class animationUI extends Component {\r\n    private _during = 0.1;\r\n    private _blocker: Node = null;\r\n    protected onLoad(): void {\r\n        let blocker = this.node.getChildByName('blocker');\r\n        if (!blocker) {\r\n            let blocker = new Node('blocker');\r\n            blocker.addComponent(BlockInputEvents);\r\n            blocker.addComponent(UITransform);\r\n            blocker.parent = this.node;\r\n            blocker.getComponent(UITransform).setContentSize(this.node.getComponent(UITransform).contentSize);\r\n            this._blocker = blocker;\r\n        }\r\n        else {\r\n            this._blocker = blocker;\r\n        }\r\n    }\r\n\r\n\r\n    close(com: Function) {\r\n        this._blocker.active = true;\r\n        let bg = this.node.getChildByName('Bg');\r\n        let content = this.node.getChildByName('Content');\r\n        if (bg.getComponent(UIOpacity)) {\r\n            tween(bg.getComponent(UIOpacity)).to(this._during, { opacity: 0 }, { easing: 'backIn' }).start();\r\n        }\r\n        else {\r\n            bg.addComponent(UIOpacity);\r\n            tween(bg.getComponent(UIOpacity)).to(this._during, { opacity: 0 }, { easing: 'backIn' }).start();\r\n        }\r\n        tween(content).to(this._during, { scale: v3(0.5, 0.5, 0.5) }).call(() => {\r\n            this._blocker.active = false;\r\n            com && com();\r\n        }).start();\r\n    }\r\n\r\n    open(com: Function) {\r\n        this._blocker.active = true;\r\n        let bg = this.node.getChildByName('Bg');\r\n        let content = this.node.getChildByName('Content');\r\n        if (bg.getComponent(UIOpacity)) {\r\n            bg.getComponent(UIOpacity).opacity = 0;\r\n            tween(bg.getComponent(UIOpacity)).to(this._during, { opacity: 255 }, { easing: 'backOut' }).start();\r\n        }\r\n        else {\r\n            bg.addComponent(UIOpacity);\r\n            bg.getComponent(UIOpacity).opacity = 0;\r\n            tween(bg.getComponent(UIOpacity)).to(this._during, { opacity: 255 }, { easing: 'backOut' }).start();\r\n        }\r\n        content.setScale(0.5, 0.5, 0.5);\r\n        tween(content).to(this._during, { scale: v3(1, 1, 1) }).call(() => {\r\n            this._blocker.active = false;\r\n            com && com();\r\n        }).start();\r\n    }\r\n\r\n}\r\n\r\n\r\n"]}